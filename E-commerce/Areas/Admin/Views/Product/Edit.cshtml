@model CatgoryWithBrandVM
<div class="container">
    <div class="row my-3">
        <div class="col-12">
            <form method="post" enctype="multipart/form-data">
                <div class="mb-3">
                    <label for="name" class="form-label">Name</label>
                    <input type="text" class="form-control" id="name" name="Name" value="@Model.Product.Name">
                </div>

                <div class="mb-3">
                    <label for="mainimg" class="form-label fw-bold">Image</label>
                    <input type="file" class="form-control" id="mainimg" name="MainImg" accept="image/*">

                    <!-- عرض الصورة الحالية -->
                    @if (!string.IsNullOrEmpty(Model?.Product?.MainImg))
                    {
                        <div class="mt-2">
                            <p class="text-muted">Current Image:</p>
                            <img src="~/images/@Model.Product.MainImg" alt="Current Image"
                                 class="img-thumbnail" style="max-height:150px;" />
                        </div>
                    }

                    <!-- عرض الصورة الجديدة (Preview) -->
                    <div class="mt-2" id="preview-container" style="display:none;">
                        <p class="text-muted">New Image Preview:</p>
                        <img id="preview" class="img-thumbnail" style="max-height:150px;" />
                    </div>
                </div>

                <script>
                    document.getElementById("mainimg").addEventListener("change", function () {
                        const previewContainer = document.getElementById("preview-container");
                        const preview = document.getElementById("preview");

                        const file = this.files[0];
                        if (file) {
                            const reader = new FileReader();
                            reader.onload = function (e) {
                                preview.src = e.target.result;
                                previewContainer.style.display = "block";
                            };
                            reader.readAsDataURL(file);
                        } else {
                            preview.src = "";
                            previewContainer.style.display = "none";
                        }
                    });
                </script>


                <div class="mb-3">
                    <label for="MainImg" class="form-label">Img</label>
                    <input type="file" class="form-control" id="mainimg" name="MainImg" value="@Model.Product.MainImg">
                </div>

                <div class="mb-3">
                    <label for="Price" class="form-label">Price</label>
                    <input type="number" class="form-control" id="price" name="Price" value="@Model.Product.Price"> 
                </div>

                <div class="mb-3">
                    <label for="Quantity" class="form-label">Quantity</label>
                    <input type="number" class="form-control" id="quantity" name="Quantity" value="@Model.Product.Quantity">
                </div>

                <div class="mb-3">
                    <label for="Discount" class="form-label">Discount</label>
                    <input type="number" class="form-control" id="discount" name="Discount" value="@Model.Product.Discount">
                </div>

                <div class="mb-3">
                    <label for="CatgoryId" class="form-label">Catgory</label>
                    <select name="CatgoryId" class="form-select">
                        @foreach (var item in Model.Catgories)
                        {
                            if(Model.Product.CatgoryId==item.Id)
                            {
                           
                                <option value=@item.Id selected>@item.Name</option>
                            }
                            else
                            {

                                <option value=@item.Id>@item.Name</option>

                            }
                        }
                    </select>
                    @*<input type="number" class="form-control" id="catgoryid" name="CatgoryId">*@
                </div>

                <div class="mb-3">
                    <label for="BrandId" class="form-label">Brand</label>
                    <select name="BrandId" class="form-select">
                        @foreach (var item in Model.Brands)
                        {
                            if (Model.Product.BrandId == item.Id)
                            {

                                <option value=@item.Id selected>@item.Name</option>
                            }
                            else
                            {

                                <option value=@item.Id>@item.Name</option>

                            }
                        }
                    </select>
                    @*<input type="number" class="form-control" id="brandid" name="BrandId">*@
                </div>

                <div class="mb-3">
                    <label for="status" class="form-label">Status</label>
                    <select name="Status" class="form-select">
                        @if (Model.Product.Status)
                        {
                            <option  value="false">InActive</option>
                            <option selected value="true">Active</option>
                        }
                        else
                        {
                            <option selected value="false">InActive</option>
                            <option value="true">Active</option>

                        }

                    </select>
                </div>
                <button type="submit" class="btn btn-primary">Submit</button>
            </form>
        </div>
    </div>
</div>